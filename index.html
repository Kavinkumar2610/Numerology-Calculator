<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Indian Lucky Vehicle Number Numerology Calculator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
    }
    .container {
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
        text-align: center;
    }
    label {
        display: block;
        margin-bottom: 5px;
    }
    input[type="text"], input[type="number"] {
        width: calc(100% - 12px);
        padding: 6px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    input[type="submit"], button, .clear-btn {
        width: 100%;
        padding: 10px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    input[type="submit"]:hover, button:hover {
        background-color: #0056b3;
    }
    .clear-btn {
        background-color: #E55451;
        margin-top: 10px;
    }
    .clear-btn:hover {
        background-color: #FF0000;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        margin-bottom: 20px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
    #showOtherNumbersBtn {
        display: none;
        margin-bottom: 20px;
    }
    #otherNumbersTableContainer {
        display: none;
        margin-top: 20px;
    }
    #otherNumbersTableContainer h2 {
        margin-bottom: 10px;
    }
    #searchTitle {
        margin-top: 10px;
    }
</style>
</head>
<body>
<div class="container">
    <h1>Indian Lucky Vehicle Plate Number Numerology Calculator</h1>
    <form id="plateForm">
        <label for="letters">Enter your plate number series (e.g., VEV)*:</label>
	<input type="text" id="letters" name="letters" pattern="[A-Za-z]+" required>
        <label for="digitSum">Enter your plate number (1-9999)*:</label>
        <input type="number" id="digitSum" name="digitSum" min="1" max="9999" required>
        <label for="desiredTotal1">Enter your desired total*:</label>
        <input type="number" id="desiredTotal1" name="desiredTotal1" min="1" max="9" required>
        <label for="desiredTotal2">Enter second desired total (optional):</label>
        <input type="number" id="desiredTotal2" name="desiredTotal2" min="1" max="9">
        <label for="desiredTotal3">Enter third desired total (optional):</label>
        <input type="number" id="desiredTotal3" name="desiredTotal3" min="1" max="9">
        <input type="submit" value="Check">
        <button class="clear-btn">Clear</button>
    </form>
    <div id="result"></div>
    <button id="showOtherNumbersBtn">Show Other Plate Numbers With The Same Desired Total</button>
    <div id="otherNumbersTableContainer">
        <h2>Other Plate Numbers With The Same Desired Total</h2>
        <label for="filterDropdown">Filter by Desired Total:</label>
        <select id="filterDropdown">
            <option value="all">Show All</option>
        </select>
        <label id="searchTitle" for="searchInput">Search by Plate Number:</label>
        <input type="text" id="searchInput" placeholder="Search by Plate Number">
        <div id="otherNumbersResult"></div>
    </div>
</div>

<script>
var letterValues = {
    'A': 1,
    'B': 2,
    'C': 3,
    'D': 4,
    'E': 5,
    'F': 8,
    'G': 3,
    'H': 5,
    'I': 1,
    'J': 1,
    'K': 2,
    'L': 3,
    'M': 4,
    'N': 5,
    'O': 7,
    'P': 8,
    'Q': 1,
    'R': 2,
    'S': 3,
    'T': 4,
    'U': 6,
    'V': 6,
    'W': 6,
    'X': 5,
    'Y': 1,
    'Z': 7
};

document.getElementById("plateForm").addEventListener("submit", function(event) {
    event.preventDefault();
    
    var letters = document.getElementById("letters").value.toUpperCase();
    var digitSum = parseInt(document.getElementById("digitSum").value);
    var desiredTotals = [];
    
    var desiredTotal1 = document.getElementById("desiredTotal1").value.trim();
    if (desiredTotal1 !== "") {
        desiredTotals.push(parseInt(desiredTotal1));
    }
    
    var desiredTotal2 = document.getElementById("desiredTotal2").value.trim();
    if (desiredTotal2 !== "") {
        desiredTotals.push(parseInt(desiredTotal2));
    }
    
    var desiredTotal3 = document.getElementById("desiredTotal3").value.trim();
    if (desiredTotal3 !== "") {
        desiredTotals.push(parseInt(desiredTotal3));
    }

    var validPlateNumbers = generatePlateNumbers(letters, digitSum, desiredTotals);

    var resultDiv = document.getElementById("result");
    resultDiv.innerHTML = "";
    if (validPlateNumbers.length === 0) {
        resultDiv.innerHTML = "<h2>Results</h2><p>No valid plate numbers found.</p>";
        document.getElementById("showOtherNumbersBtn").style.display = "block";
    } else {
        var table = "<h2>Results</h2><table><tr><th>Plate Series</th><th>Plate Number</th><th>Desired Total</th></tr>";
        validPlateNumbers.forEach(function(plate)
{
            table += "<tr><td>" + plate[0] + "</td><td>" + plate[1] + "</td><td>" + plate[2] + "</td></tr>";
        });
        table += "</table>";
        resultDiv.innerHTML = table;
        document.getElementById("showOtherNumbersBtn").style.display = "block";
    }
});

document.getElementById("showOtherNumbersBtn").addEventListener("click", function() {
    var letters = document.getElementById("letters").value.toUpperCase();
    var digitSum = parseInt(document.getElementById("digitSum").value);
    var desiredTotals = [];
    
    var desiredTotal1 = document.getElementById("desiredTotal1").value.trim();
    if (desiredTotal1 !== "") {
        desiredTotals.push(parseInt(desiredTotal1));
    }
    
    var desiredTotal2 = document.getElementById("desiredTotal2").value.trim();
    if (desiredTotal2 !== "") {
        desiredTotals.push(parseInt(desiredTotal2));
    }
    
    var desiredTotal3 = document.getElementById("desiredTotal3").value.trim();
    if (desiredTotal3 !== "") {
        desiredTotals.push(parseInt(desiredTotal3));
    }

    var otherNumbersTableContainer = document.getElementById("otherNumbersTableContainer");
    otherNumbersTableContainer.style.display = "block";

    var otherNumbersResultDiv = document.getElementById("otherNumbersResult");
    otherNumbersResultDiv.innerHTML = "";

    var otherNumbers = generateOtherNumbers(letters, digitSum, desiredTotals, letterValues);

    if (otherNumbers.length === 0) {
        otherNumbersResultDiv.innerHTML = "<p>No other numbers found with the same total.</p>";
    } else {
        var table = "<table id='otherNumbersTable'><tr><th>Plate Series</th><th>Plate Number</th><th>Desired Total</th></tr>";
        otherNumbers.forEach(function(number) {
            table += "<tr><td>" + letters + "</td><td>" + number[0] + "</td><td>" + number[1] + "</td></tr>";
        });
        table += "</table>";
        otherNumbersResultDiv.innerHTML = table;
    }

    populateFilterDropdown(desiredTotals);
});

// Function to search within other numbers table
document.getElementById("searchInput").addEventListener("input", function() {
    var searchValue = this.value.toLowerCase();
    var rows = document.getElementById("otherNumbersTable").getElementsByTagName("tr");

    for (var i = 1; i < rows.length; i++) {
        var plateNumber = rows[i].getElementsByTagName("td")[1].textContent.toLowerCase();
        if (plateNumber.indexOf(searchValue) > -1) {
            rows[i].style.display = "";
        } else {
            rows[i].style.display = "none";
        }
    }
});

// Function to populate filter dropdown with desired totals
function populateFilterDropdown(desiredTotals) {
    var filterDropdown = document.getElementById("filterDropdown");
    filterDropdown.innerHTML = "<option value='all'>Show All</option>";
    desiredTotals.forEach(function(total) {
        filterDropdown.innerHTML += "<option value='" + total + "'>" + total + "</option>";
    });
}

// Function to filter other numbers by desired total
document.getElementById("filterDropdown").addEventListener("change", function() {
    var filterValue = this.value;
    var rows = document.getElementById("otherNumbersTable").getElementsByTagName("tr");

    if (filterValue === "all") {
        for (var i = 1; i < rows.length; i++) {
            rows[i].style.display = "";
        }
    } else {
        for (var i = 1; i < rows.length; i++) {
            var desiredTotal = rows[i].getElementsByTagName("td")[2].textContent;
            if (desiredTotal !== filterValue) {
                rows[i].style.display = "none";
            } else {
                rows[i].style.display = "";
            }
        }
    }
});

// Function to clear all fields and tables
document.querySelector(".clear-btn").addEventListener("click", function(event) {
    event.preventDefault();
    document.getElementById("plateForm").reset();
    document.getElementById("result").innerHTML = "";
    document.getElementById("showOtherNumbersBtn").style.display = "none";
    document.getElementById("otherNumbersTableContainer").style.display = "none";
});

function calculateSingleDigitSum(number) {
    while (number >= 10) {
        number = Array.from(String(number), Number).reduce((a, b) => a + b, 0);
    }
    return number;
}

function generatePlateNumbers(letters, digitSum, desiredTotals) {
    var validPlateNumbers = [];
    var letterSum = Array.from(letters).reduce(function(sum, char) {
        return sum + (letterValues[char] || 0);
    }, 0);
    
    desiredTotals.forEach(function(desiredTotal) {
        var totalSum = letterSum + digitSum;
        var singleDigitSum = calculateSingleDigitSum(totalSum);
        if (singleDigitSum === desiredTotal) {
            validPlateNumbers.push([letters, letters + digitSum, desiredTotal]);
        }
    });

    return validPlateNumbers;
}

function generateOtherNumbers(letters, digitSum, desiredTotals, letterValues) {
    var otherNumbers = [];
    
    for (var i = 1; i <= 9999; i++) {
        var letterSum = Array.from(letters).reduce(function(sum, char) {
            return sum + (letterValues[char] || 0);
        }, 0);
        var totalSum = letterSum + i + digitSum;
        var singleDigitSum = calculateSingleDigitSum(totalSum);
        if (desiredTotals.includes(singleDigitSum)) {
            otherNumbers.push([i, singleDigitSum]);
        }
    }

    return otherNumbers;
}

// Initialize the filter dropdown with desired totals on page load
window.addEventListener("DOMContentLoaded", function() {
    var desiredTotals = [];
    var desiredTotal1 = document.getElementById("desiredTotal1").value.trim();
    var desiredTotal2 = document.getElementById("desiredTotal2").value.trim();
    var desiredTotal3 = document.getElementById("desiredTotal3").value.trim();
    
    if (desiredTotal1 !== "") {
        desiredTotals.push(parseInt(desiredTotal1));
    }
    if (desiredTotal2 !== "") {
        desiredTotals.push(parseInt(desiredTotal2));
    }
    if (desiredTotal3 !== "") {
        desiredTotals.push(parseInt(desiredTotal3));
    }

    populateFilterDropdown(desiredTotals);
});
</script>
